- service: arista.studio.v1.StudioConfigService
  method: Set
  body:
    value:
      key:
        studio_id: 08f13fdb-30c4-4d38-9e2a-3221771450b1
        workspace_id: ''
      created_at: '2025-08-05T19:28:26.522Z'
      created_by: mschulman
      last_modified_at: '2025-08-06T17:56:30.944Z'
      last_modified_by: mschulman
      display_name: DHCP Server
      description: Configure DHCP Server on a device
      template:
        type: TEMPLATE_TYPE_MAKO
        body: |-
          % if dhcpProfileAssignResolver:
              <% profileGroup = dhcpProfileAssignResolver.resolve()["dhcpProfileGroup"] %>
              <% ctx.info(f"profileGroup: {profileGroup}") %>

              <%
                  dhcpProfileList = [ profile for profile in dhcpServerProfiles if profile.get("profileName") == profileGroup["dhcpServerProfile"] ]
                  if dhcpProfileList:
                          dhcpProfile = dhcpProfileList[0]
                          ctx.info(f"dhcpProfile: {dhcpProfileList[0]}")
                  endif

              %>

                 % if dhcpProfileList:
          dhcp server
                        % if dhcpProfile.disableDhcpServer:
           disabled
                        % else:
           no disabled
                        % endif
                        % if dhcpProfile.dnsDomain:
           dns domain name ipv4 ${dhcpProfile.dnsDomain}
                        % endif
                        % if dhcpProfile.dnsServers:
                               <%
                                      dnsServerList = ""
                                      for dnsServer in dhcpProfile.dnsServers: 
                                             dnsServerList = dnsServerList + ' ' + dnsServer
                                      endfor
                               %>
           dns server ipv4 ${dnsServerList} 
                        % endif
                        % if dhcpProfile.leaseTime:
           lease time ipv4 ${dhcpProfile.leaseTime.leaseDays} days ${dhcpProfile.leaseTime.leaseHours} hours ${dhcpProfile.leaseTime.leaseMinutes} minutes
                        % endif
                        % if dhcpProfile.subnets:
                               % for subnet in dhcpProfile.subnets:
           subnet ${subnet.subnet}
             default-gateway ${subnet.defaultGateway}
                                      % for subnetRange in subnet.ranges:
             range ${subnetRange.startIP} ${subnetRange.endIP}
                                      % endfor
                                      % if subnet.subnetLeaseGroup.perSubnetLease:
             lease time ${subnet.subnetLeaseGroup.leaseDays} days ${subnet.subnetLeaseGroup.leaseHours} hours ${subnet.subnetLeaseGroup.leaseMinutes} minutes
                                      % endif
                               % endfor
                        % endif                     
                 % endif
          % endif
      input_schema:
        fields:
          values:
            51642282-9639-4891-9380-76c26cdf0753:
              id: 51642282-9639-4891-9380-76c26cdf0753
              type: INPUT_FIELD_TYPE_GROUP
              name: leaseTime
              label: Lease Time
              description: ''
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props: null
              group_props:
                members:
                  values:
                    - 463a4679-7d4e-4ede-ae7e-07118753152e
                    - 4c779af7-e11a-495b-8976-af504187cbac
                    - 60b1a064-950a-496f-aded-3d6d3138b997
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            38beaf9c-7def-437d-a159-669cb2a4862a:
              id: 38beaf9c-7def-437d-a159-669cb2a4862a
              type: INPUT_FIELD_TYPE_INTEGER
              name: leaseDays
              label: Lease Days
              description: Lease Days (Range 0-2000)
              required: false
              boolean_props: null
              integer_props:
                default_value: '0'
                static_options: null
                range: 0..2000
                dynamic_options: null
                extra_values_allowed: false
              float_props: null
              string_props: null
              group_props: null
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            a9f6a0b1-7187-400e-ad1e-06bfcfbc7d0a:
              id: a9f6a0b1-7187-400e-ad1e-06bfcfbc7d0a
              type: INPUT_FIELD_TYPE_BOOLEAN
              name: perSubnetLease
              label: Per Subnet Lease
              description: ''
              required: false
              boolean_props:
                default_value: false
              integer_props: null
              float_props: null
              string_props: null
              group_props: null
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            d9ac9040-7f6b-4373-befa-93843ee0036a:
              id: d9ac9040-7f6b-4373-befa-93843ee0036a
              type: INPUT_FIELD_TYPE_INTEGER
              name: leaseMinutes
              label: Lease Minutes
              description: Lease Minutes (Range 0-59)
              required: false
              boolean_props: null
              integer_props:
                default_value: '0'
                static_options: null
                range: 0..59
                dynamic_options: null
                extra_values_allowed: false
              float_props: null
              string_props: null
              group_props: null
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            fc8bad62-87bd-4a01-adba-5fc30b97cebb:
              id: fc8bad62-87bd-4a01-adba-5fc30b97cebb
              type: INPUT_FIELD_TYPE_GROUP
              name: dhcpServerProfile
              label: DHCP Server Profile Group
              description: Group of members for DHCP Profile
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props: null
              group_props:
                members:
                  values:
                    - 5abc1979-0f78-4a99-967c-358a6a1f10f7
                    - 51642282-9639-4891-9380-76c26cdf0753
                    - a10df18e-8545-4c0e-b875-6333172e9cd7
                    - c78ea980-bc96-44f6-b143-7d8f3b1dc6ef
                    - dfe312bf-309a-4d2d-a059-11b0c55cec8b
                    - 61ad727e-df10-4a9d-af01-c7e44c6f6e49
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            402649b9-e2ae-4fd1-87a3-f4a6c66c2aa3:
              id: 402649b9-e2ae-4fd1-87a3-f4a6c66c2aa3
              type: INPUT_FIELD_TYPE_GROUP
              name: value
              label: Subnets Group
              description: Group of members for Subnets
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props: null
              group_props:
                members:
                  values:
                    - cd7af121-c06f-4dac-b9fc-d814388ff563
                    - 8db355b1-77c2-49d4-a401-eaa5e727ce20
                    - 25b95b56-b443-40e6-a3ef-e1d1a32a403a
                    - d41cc520-f615-44a3-aad6-f2bed16ecee1
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            60b1a064-950a-496f-aded-3d6d3138b997:
              id: 60b1a064-950a-496f-aded-3d6d3138b997
              type: INPUT_FIELD_TYPE_INTEGER
              name: leaseHours
              label: Lease Hours
              description: Lease Time - Hours (Range 0-23)
              required: false
              boolean_props: null
              integer_props:
                default_value: '0'
                static_options: null
                range: 0..23
                dynamic_options: null
                extra_values_allowed: false
              float_props: null
              string_props: null
              group_props: null
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            root:
              id: root
              type: INPUT_FIELD_TYPE_GROUP
              name: ''
              label: ''
              description: ''
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props: null
              group_props:
                members:
                  values:
                    - fab9c41f-95ba-4674-871d-6d074c18c6d9
                    - 3d0c0b90-9e1d-4e47-b94d-cb1acad588a8
              collection_props: null
              resolver_props: null
              auto_fill_action_id: null
              tag_matcher_props: null
            a378b968-a597-48b8-a3fe-12b6fc7e2728:
              id: a378b968-a597-48b8-a3fe-12b6fc7e2728
              type: INPUT_FIELD_TYPE_STRING
              name: endIP
              label: End IP
              description: Last IP in the range
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props:
                default_value: null
                static_options: null
                dynamic_options: null
                length: null
                pattern: null
                format: ipv4
                is_secret: false
                extra_values_allowed: false
              group_props: null
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            5abc1979-0f78-4a99-967c-358a6a1f10f7:
              id: 5abc1979-0f78-4a99-967c-358a6a1f10f7
              type: INPUT_FIELD_TYPE_STRING
              name: dnsDomain
              label: DNS Domain
              description: DNS Domain Suffix to return via DHCP
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props:
                default_value: null
                static_options: null
                dynamic_options: null
                length: null
                pattern: null
                format: null
                is_secret: false
                extra_values_allowed: false
              group_props: null
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            4c779af7-e11a-495b-8976-af504187cbac:
              id: 4c779af7-e11a-495b-8976-af504187cbac
              type: INPUT_FIELD_TYPE_INTEGER
              name: leaseMinutes
              label: Lease Minutes
              description: Lease Time - Minutes (Range 0-59)
              required: false
              boolean_props: null
              integer_props:
                default_value: '0'
                static_options: null
                range: 0..59
                dynamic_options: null
                extra_values_allowed: false
              float_props: null
              string_props: null
              group_props: null
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            a10df18e-8545-4c0e-b875-6333172e9cd7:
              id: a10df18e-8545-4c0e-b875-6333172e9cd7
              type: INPUT_FIELD_TYPE_BOOLEAN
              name: disableDhcpServer
              label: Disable DHCP Server
              description: Disable the DHCP Server
              required: false
              boolean_props:
                default_value: false
              integer_props: null
              float_props: null
              string_props: null
              group_props: null
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            cd7af121-c06f-4dac-b9fc-d814388ff563:
              id: cd7af121-c06f-4dac-b9fc-d814388ff563
              type: INPUT_FIELD_TYPE_STRING
              name: subnet
              label: Subnet
              description: IPv4 Subnet
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props:
                default_value: null
                static_options: null
                dynamic_options: null
                length: null
                pattern: null
                format: cidrv4
                is_secret: false
                extra_values_allowed: false
              group_props: null
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            dfe312bf-309a-4d2d-a059-11b0c55cec8b:
              id: dfe312bf-309a-4d2d-a059-11b0c55cec8b
              type: INPUT_FIELD_TYPE_COLLECTION
              name: subnets
              label: Subnets
              description: Configure the subnets to be served by this DHCP Server
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props: null
              group_props: null
              collection_props:
                base_field_id: 402649b9-e2ae-4fd1-87a3-f4a6c66c2aa3
                key: cd7af121-c06f-4dac-b9fc-d814388ff563
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            d41cc520-f615-44a3-aad6-f2bed16ecee1:
              id: d41cc520-f615-44a3-aad6-f2bed16ecee1
              type: INPUT_FIELD_TYPE_STRING
              name: defaultGateway
              label: Default Gateway
              description: Default Gateway for the Subnet
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props:
                default_value: null
                static_options: null
                dynamic_options: null
                length: null
                pattern: null
                format: ipv4
                is_secret: false
                extra_values_allowed: false
              group_props: null
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            b5674efa-1e84-4ecf-9afe-2a3eeac94c04:
              id: b5674efa-1e84-4ecf-9afe-2a3eeac94c04
              type: INPUT_FIELD_TYPE_STRING
              name: dnsServer
              label: DNS Server
              description: DNS Server IP to be returned via DHCP
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props:
                default_value: null
                static_options: null
                dynamic_options: null
                length: null
                pattern: null
                format: ipv4
                is_secret: false
                extra_values_allowed: false
              group_props: null
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            c78ea980-bc96-44f6-b143-7d8f3b1dc6ef:
              id: c78ea980-bc96-44f6-b143-7d8f3b1dc6ef
              type: INPUT_FIELD_TYPE_STRING
              name: profileName
              label: Profile Name
              description: ''
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props:
                default_value: null
                static_options: null
                dynamic_options: null
                length: null
                pattern: null
                format: null
                is_secret: false
                extra_values_allowed: false
              group_props: null
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            0d4111a3-51c5-4f61-9107-869fe1bf8286:
              id: 0d4111a3-51c5-4f61-9107-869fe1bf8286
              type: INPUT_FIELD_TYPE_INTEGER
              name: leaseHours
              label: Lease Hours
              description: Lease in Hours (0-23)
              required: false
              boolean_props: null
              integer_props:
                default_value: '0'
                static_options: null
                range: 0..23
                dynamic_options: null
                extra_values_allowed: false
              float_props: null
              string_props: null
              group_props: null
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            8db355b1-77c2-49d4-a401-eaa5e727ce20:
              id: 8db355b1-77c2-49d4-a401-eaa5e727ce20
              type: INPUT_FIELD_TYPE_COLLECTION
              name: ranges
              label: Ranges
              description: IP Ranges for this subnet
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props: null
              group_props: null
              collection_props:
                base_field_id: 1cbbc771-c104-4ed1-90e6-e3a60703c83d
                key: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            d12e8b77-2f73-4360-8f63-bb3e7c12a0bb:
              id: d12e8b77-2f73-4360-8f63-bb3e7c12a0bb
              type: INPUT_FIELD_TYPE_STRING
              name: startIP
              label: Start IP
              description: First IP in the range
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props:
                default_value: null
                static_options: null
                dynamic_options: null
                length: null
                pattern: null
                format: ipv4
                is_secret: false
                extra_values_allowed: false
              group_props: null
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            fab9c41f-95ba-4674-871d-6d074c18c6d9:
              id: fab9c41f-95ba-4674-871d-6d074c18c6d9
              type: INPUT_FIELD_TYPE_COLLECTION
              name: dhcpServerProfiles
              label: DHCP Server Profiles
              description: ''
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props: null
              group_props: null
              collection_props:
                base_field_id: fc8bad62-87bd-4a01-adba-5fc30b97cebb
                key: c78ea980-bc96-44f6-b143-7d8f3b1dc6ef
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            11e928f1-c00b-4d50-b73f-a43ce2e897f5:
              id: 11e928f1-c00b-4d50-b73f-a43ce2e897f5
              type: INPUT_FIELD_TYPE_STRING
              name: dhcpServerProfile
              label: DHCP Server Profile
              description: The DHCP Server Profile to Assign to this device tag(s)
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props:
                default_value: null
                static_options: null
                dynamic_options:
                  values:
                    - '{"fieldId":"c78ea980-bc96-44f6-b143-7d8f3b1dc6ef"}'
                length: null
                pattern: null
                format: null
                is_secret: false
                extra_values_allowed: false
              group_props: null
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            63551f15-8392-47ca-a573-16c3c2343e56:
              id: 63551f15-8392-47ca-a573-16c3c2343e56
              type: INPUT_FIELD_TYPE_GROUP
              name: dhcpProfileGroup
              label: DHCP Profile Group
              description: ''
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props: null
              group_props:
                members:
                  values:
                    - 11e928f1-c00b-4d50-b73f-a43ce2e897f5
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            3d0c0b90-9e1d-4e47-b94d-cb1acad588a8:
              id: 3d0c0b90-9e1d-4e47-b94d-cb1acad588a8
              type: INPUT_FIELD_TYPE_RESOLVER
              name: dhcpProfileAssignResolver
              label: DHCP Profile Assignment
              description: ''
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props: null
              group_props: null
              collection_props: null
              resolver_props:
                base_field_id: 63551f15-8392-47ca-a573-16c3c2343e56
                display_mode: RESOLVER_FIELD_DISPLAY_MODE_SPARSE
                input_mode: RESOLVER_FIELD_INPUT_MODE_MULTI_DEVICE_TAG
                input_tag_label: null
                tag_filter_query: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            463a4679-7d4e-4ede-ae7e-07118753152e:
              id: 463a4679-7d4e-4ede-ae7e-07118753152e
              type: INPUT_FIELD_TYPE_INTEGER
              name: leaseDays
              label: Lease Days
              description: Lease Time in Days (Range 0-2000)
              required: false
              boolean_props: null
              integer_props:
                default_value: '0'
                static_options: null
                range: 0..2000
                dynamic_options: null
                extra_values_allowed: false
              float_props: null
              string_props: null
              group_props: null
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            61ad727e-df10-4a9d-af01-c7e44c6f6e49:
              id: 61ad727e-df10-4a9d-af01-c7e44c6f6e49
              type: INPUT_FIELD_TYPE_COLLECTION
              name: dnsServers
              label: DNS Servers
              description: ''
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props: null
              group_props: null
              collection_props:
                base_field_id: b5674efa-1e84-4ecf-9afe-2a3eeac94c04
                key: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            1cbbc771-c104-4ed1-90e6-e3a60703c83d:
              id: 1cbbc771-c104-4ed1-90e6-e3a60703c83d
              type: INPUT_FIELD_TYPE_GROUP
              name: value
              label: Ranges Group
              description: Group of members for Ranges
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props: null
              group_props:
                members:
                  values:
                    - d12e8b77-2f73-4360-8f63-bb3e7c12a0bb
                    - a378b968-a597-48b8-a3fe-12b6fc7e2728
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
            25b95b56-b443-40e6-a3ef-e1d1a32a403a:
              id: 25b95b56-b443-40e6-a3ef-e1d1a32a403a
              type: INPUT_FIELD_TYPE_GROUP
              name: subnetLeaseGroup
              label: Subnet Lease Group
              description: Subnet-specific Lease Times
              required: false
              boolean_props: null
              integer_props: null
              float_props: null
              string_props: null
              group_props:
                members:
                  values:
                    - 38beaf9c-7def-437d-a159-669cb2a4862a
                    - 0d4111a3-51c5-4f61-9107-869fe1bf8286
                    - d9ac9040-7f6b-4373-befa-93843ee0036a
                    - a9f6a0b1-7187-400e-ad1e-06bfcfbc7d0a
              collection_props: null
              resolver_props: null
              auto_fill_action_id: ''
              tag_matcher_props: null
        layout:
          value: '{"51642282-9639-4891-9380-76c26cdf0753":{"key":"51642282-9639-4891-9380-76c26cdf0753","type":"INPUT","order":["463a4679-7d4e-4ede-ae7e-07118753152e","60b1a064-950a-496f-aded-3d6d3138b997","4c779af7-e11a-495b-8976-af504187cbac"]},"fc8bad62-87bd-4a01-adba-5fc30b97cebb":{"key":"fc8bad62-87bd-4a01-adba-5fc30b97cebb","type":"INPUT","order":["c78ea980-bc96-44f6-b143-7d8f3b1dc6ef","a10df18e-8545-4c0e-b875-6333172e9cd7","5abc1979-0f78-4a99-967c-358a6a1f10f7","61ad727e-df10-4a9d-af01-c7e44c6f6e49","51642282-9639-4891-9380-76c26cdf0753","dfe312bf-309a-4d2d-a059-11b0c55cec8b"]},"402649b9-e2ae-4fd1-87a3-f4a6c66c2aa3":{"key":"402649b9-e2ae-4fd1-87a3-f4a6c66c2aa3","type":"INPUT","order":["cd7af121-c06f-4dac-b9fc-d814388ff563","d41cc520-f615-44a3-aad6-f2bed16ecee1","8db355b1-77c2-49d4-a401-eaa5e727ce20","25b95b56-b443-40e6-a3ef-e1d1a32a403a"]},"25b95b56-b443-40e6-a3ef-e1d1a32a403a":{"key":"25b95b56-b443-40e6-a3ef-e1d1a32a403a","type":"INPUT","order":["a9f6a0b1-7187-400e-ad1e-06bfcfbc7d0a","38beaf9c-7def-437d-a159-669cb2a4862a","0d4111a3-51c5-4f61-9107-869fe1bf8286","d9ac9040-7f6b-4373-befa-93843ee0036a"]},"fab9c41f-95ba-4674-871d-6d074c18c6d9":{"key":"fab9c41f-95ba-4674-871d-6d074c18c6d9","type":"INPUT","isPageLayout":true},"dfe312bf-309a-4d2d-a059-11b0c55cec8b":{"key":"dfe312bf-309a-4d2d-a059-11b0c55cec8b","type":"INPUT","isPageLayout":true}}'
      from_package: ''
